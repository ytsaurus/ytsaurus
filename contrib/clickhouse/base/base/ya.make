# Generated by devtools/yamaker.

LIBRARY()

LICENSE(
    Apache-2.0 AND
    BSL-1.0 AND
    CC0-1.0 AND
    MIT AND
    NTP
)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(24.8.5.115)

PEERDIR(
    contrib/clickhouse/base/poco/Foundation
    contrib/clickhouse/base/poco/Net
    contrib/clickhouse/base/poco/Util
    contrib/libs/fmt
    contrib/restricted/cityhash-1.0.2
    library/cpp/sanitizer/include
)

ADDINCL(
    GLOBAL contrib/clickhouse/base
    GLOBAL contrib/clickhouse/contrib/pdqsort
    GLOBAL contrib/libs/miniselect/include
    contrib/clickhouse/base/poco/Foundation/include
    contrib/clickhouse/base/poco/Net/include
    contrib/clickhouse/base/poco/Util/include
    contrib/clickhouse/includes/configs
    contrib/restricted/cityhash-1.0.2
)

NO_COMPILER_WARNINGS()

NO_UTIL()

IF (OS_DARWIN)
    CFLAGS(
        GLOBAL -DOS_DARWIN
    )
ELSEIF (OS_LINUX)
    CFLAGS(
        GLOBAL -DOS_LINUX
    )
ENDIF()

IF (OS_LINUX)
    CFLAGS(
        -DPOCO_HAVE_FD_EPOLL
    )
ENDIF()

CFLAGS(
    -DBOOST_ASIO_HAS_STD_INVOKE_RESULT=1
    -DBOOST_ASIO_STANDALONE=1
    -DBOOST_TIMER_ENABLE_DEPRECATED=1
    -DINCBIN_SILENCE_BITCODE_WARNING
    -DPOCO_ENABLE_CPP11
    -DPOCO_OS_FAMILY_UNIX
    -DWITH_COVERAGE=0
    -D_LIBCPP_ENABLE_THREAD_SAFETY_ANNOTATIONS
    -D_LIBUNWIND_IS_NATIVE_ONLY
)

SRCS(
    Decimal.cpp
    JSON.cpp
    Numa.cpp
    StringRef.cpp
    argsToConfig.cpp
    cgroupsv2.cpp
    coverage.cpp
    demangle.cpp
    errnoToString.cpp
    getAvailableMemoryAmount.cpp
    getFQDNOrHostName.cpp
    getMemoryAmount.cpp
    getPageSize.cpp
    getThreadId.cpp
    int8_to_string.cpp
    itoa.cpp
    mremap.cpp
    phdr_cache.cpp
    preciseExp10.cpp
    safeExit.cpp
    shift10.cpp
    sleep.cpp
    terminalColors.cpp
    throwError.cpp
)

END()
