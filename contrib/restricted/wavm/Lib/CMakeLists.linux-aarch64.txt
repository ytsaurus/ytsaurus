# This file was generated by the YaTool build system (https://github.com/yandex/yatool),
# from a source YaTool build configuration provided in ya.make files.
#
# If the repository supports both CMake and ya build configurations, please modify both of them.
#
# If only CMake build configuration is supported then modify only CMake files and note that only
# simple modifications are allowed like adding source-files to targets or adding simple properties
# like target_include_directories. These modifications will be ported to original ya.make files
# by maintainers. Any complex modifications which can't be easily ported back to the ya build
# system may be rejected.
#
# Please refer to the build instructions in the repository for more information about manual
# changes in this file.

find_package(linux-headers-generic REQUIRED)

add_library(restricted-wavm-Lib)


target_compile_options(restricted-wavm-Lib PRIVATE
  -DHAS_FUTIMENS
  -DHAS_UTIMENSAT
  -DWASM_C_API=WAVM_API
  -DWAVM_API=
  $<IF:$<CXX_COMPILER_ID:MSVC>,,-Wno-everything>
)

target_include_directories(restricted-wavm-Lib PRIVATE
  ${PROJECT_SOURCE_DIR}/contrib/libs/libunwind/include
  ${PROJECT_BINARY_DIR}/contrib/libs/llvm18/include
  ${PROJECT_SOURCE_DIR}/contrib/libs/llvm18/include
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Include
)

target_link_libraries(restricted-wavm-Lib PUBLIC
  linux-headers-generic::linux-headers-generic
  contrib-libs-cxxsupp
  contrib-libs-libunwind
  llvm18-lib-Analysis
  llvm18-lib-AsmParser
  llvm18-lib-BinaryFormat
  lib-Bitcode-Reader
  lib-Bitcode-Writer
  lib-Bitstream-Reader
  llvm18-lib-CodeGen
  lib-CodeGen-AsmPrinter
  lib-CodeGen-GlobalISel
  lib-CodeGen-MIRParser
  lib-CodeGen-SelectionDAG
  lib-DebugInfo-CodeView
  lib-DebugInfo-DWARF
  lib-DebugInfo-MSF
  llvm18-lib-Demangle
  llvm18-lib-ExecutionEngine
  lib-ExecutionEngine-JITLink
  lib-ExecutionEngine-Orc
  lib-ExecutionEngine-RuntimeDyld
  lib-Frontend-OpenMP
  llvm18-lib-IR
  llvm18-lib-IRReader
  llvm18-lib-Linker
  llvm18-lib-MC
  lib-MC-MCDisassembler
  lib-MC-MCParser
  llvm18-lib-Object
  llvm18-lib-Passes
  llvm18-lib-ProfileData
  llvm18-lib-Remarks
  llvm18-lib-Support
  llvm18-lib-Target
  lib-Target-AArch64
  Target-AArch64-AsmParser
  Target-AArch64-Disassembler
  Target-AArch64-MCTargetDesc
  Target-AArch64-TargetInfo
  Target-AArch64-Utils
  lib-Target-ARM
  Target-ARM-AsmParser
  Target-ARM-Disassembler
  Target-ARM-MCTargetDesc
  Target-ARM-TargetInfo
  Target-ARM-Utils
  lib-Target-BPF
  Target-BPF-AsmParser
  Target-BPF-Disassembler
  Target-BPF-MCTargetDesc
  Target-BPF-TargetInfo
  lib-Target-NVPTX
  Target-NVPTX-MCTargetDesc
  Target-NVPTX-TargetInfo
  lib-Target-PowerPC
  Target-PowerPC-AsmParser
  Target-PowerPC-Disassembler
  Target-PowerPC-MCTargetDesc
  Target-PowerPC-TargetInfo
  lib-Target-WebAssembly
  Target-WebAssembly-AsmParser
  Target-WebAssembly-Disassembler
  Target-WebAssembly-MCTargetDesc
  Target-WebAssembly-TargetInfo
  lib-Target-X86
  Target-X86-AsmParser
  Target-X86-Disassembler
  Target-X86-MCTargetDesc
  Target-X86-TargetInfo
  llvm18-lib-TextAPI
  lib-Transforms-AggressiveInstCombine
  lib-Transforms-CFGuard
  lib-Transforms-Coroutines
  lib-Transforms-IPO
  lib-Transforms-InstCombine
  lib-Transforms-Instrumentation
  lib-Transforms-Scalar
  lib-Transforms-Utils
  lib-Transforms-Vectorize
  cpp-sanitizer-include
)

target_sources(restricted-wavm-Lib PRIVATE
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Emscripten/Emscripten.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Emscripten/EmscriptenThreads.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/IR/DisassemblyNames.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/IR/FeatureSpec.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/IR/FloatPrinting.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/IR/Module.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/IR/Operators.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/IR/RandomModule.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/IR/Types.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/IR/Validate.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/EmitConvert.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/EmitCore.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/EmitExceptions.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/EmitFunction.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/EmitMem.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/EmitModule.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/EmitNumeric.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/EmitTable.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/EmitVar.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/LLVMCompile.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/LLVMJIT.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/LLVMModule.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/Thunk.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/LLVMJIT/Win64EH.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Logging/Logging.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/NFA/NFA.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/ObjectCache/ObjectCache.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/ClockPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/DiagnosticsPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/ErrorPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/EventPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/FilePOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/MemoryPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/MutexPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/RWMutexPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/RandomPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/SignalPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/ThreadPOSIX.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/RegExp/RegExp.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Atomics.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Compartment.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Context.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Exception.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Global.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Instance.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Intrinsics.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Invoke.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Linker.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Memory.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Module.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/ObjectGC.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/ResourceQuota.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Runtime.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/Table.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/VectorOverMMap.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Runtime/WAVMIntrinsics.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/ThreadTest/ThreadTest.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/VFS/SandboxFS.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/VFS/VFS.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASI/WASI.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASI/WASIArgsEnvs.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASI/WASIClocks.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASI/WASIDiagnostics.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASI/WASIFile.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASM/WASMSerialization.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASTParse/Lexer.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASTParse/Parse.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASTParse/ParseFunction.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASTParse/ParseModule.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASTParse/ParseNumbers.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASTParse/ParseTests.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/WASTPrint/Print.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/wavm-c/wavm-c.cpp
  ${PROJECT_SOURCE_DIR}/contrib/restricted/wavm/Lib/Platform/POSIX/POSIX-AArch64.S
)

