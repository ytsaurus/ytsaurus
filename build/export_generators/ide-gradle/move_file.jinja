{%- set moves = target.target_commands|selectattr("macro", "eq", "move_file") -%}
{%- if moves|length -%}
{%-     for move in moves -%}
{%-         set src = move.args[0] -%}
{%-         set dst = move.args[1] %}

val codegen{{ move['_object_index'] }} = tasks.register("codegen{{ move['_object_index'] }}") {
    doLast {
        file("{{ PatchRoots(src) }}").renameTo(file("{{ PatchRoots(dst) }}"))
    }
}
{%      endfor -%}
{%- endif -%}
