package NYT.NTabletClient.NProto;

import "yt/core/misc/guid.proto";
import "yt/ytlib/hive/transaction_supervisor_service.proto";
import "yt/ytlib/chunk_client/chunk_meta.proto";

////////////////////////////////////////////////////////////////////////////////

message TReqStartTransaction
{
    // NB: Tablet transaction ids are generated by clients.
    required NYT.NProto.TGuid transaction_id = 1;

    required int64 start_timestamp = 2;

    // Transaction timeout (in ms).
    optional int32 timeout = 3;
}

message TRspStartTransaction
{ }

////////////////////////////////////////////////////////////////////////////////

message TReqRead
{
    required NYT.NProto.TGuid tablet_id = 1;
    required int64 timestamp = 2;
    required bytes encoded_request = 3;
    optional int32 response_codec = 4;
}

message TRspRead
{
    required bytes encoded_response = 1;
}

////////////////////////////////////////////////////////////////////////////////

message TReqWrite
{
    required NYT.NProto.TGuid transaction_id = 1;
    required NYT.NProto.TGuid tablet_id = 2;
    // Wire-encoded request is passed via attachments.
}

message TRspWrite
{
    // Wire-encoded response is passed via attachments.
}

////////////////////////////////////////////////////////////////////////////////

