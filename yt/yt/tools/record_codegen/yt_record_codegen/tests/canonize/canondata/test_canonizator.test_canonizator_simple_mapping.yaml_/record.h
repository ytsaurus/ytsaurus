// Autogenerated, do not edit!

#pragma once

#include <yt/yt/client/table_client/record_codegen_h.h>
#include <yt/yt/client/table_client/row_base.h>

#include <library/cpp/yt/memory/leaky_singleton.h>

#include <library/cpp/yt/yson_string/string.h>

namespace NYT::NTableClient::NTest::NRecords {

////////////////////////////////////////////////////////////////////////////////

struct TSimpleMapping;
struct TSimpleMappingPartial;
struct TSimpleMappingKey;
struct TSimpleMappingIdMapping;
struct TSimpleMappingPartialIdMapping;
class TSimpleMappingDescriptor;

struct TSimpleMappingIdMapping
{
    const int KeyA;
    const int KeyB;
    const int KeyC;
    const int ValueA;
    const int ValueB;
    const int ValueC;

    explicit TSimpleMappingIdMapping(const NYT::NTableClient::TNameTablePtr& nameTable);
};

struct TSimpleMappingPartialIdMapping
{
    const std::optional<int> KeyA;
    const std::optional<int> KeyB;
    const std::optional<int> KeyC;
    const std::optional<int> ValueA;
    const std::optional<int> ValueB;
    const std::optional<int> ValueC;

    explicit TSimpleMappingPartialIdMapping(const NYT::NTableClient::TNameTablePtr& nameTable);
};

class TSimpleMappingDescriptor
    : public NYT::NTableClient::IRecordDescriptor
{
public:
    using TRecord = TSimpleMapping;
    using TRecordPartial = TSimpleMappingPartial;
    using TKey = TSimpleMappingKey;
    using TIdMapping = TSimpleMappingIdMapping;
    using TPartialIdMapping = TSimpleMappingPartialIdMapping;
    static constexpr int FieldCount = 6;

    static const TSimpleMappingDescriptor* Get();

    const NTableClient::TTableSchemaPtr& GetSchema() const override;
    const NTableClient::TNameTablePtr& GetNameTable() const override;
    const TSimpleMappingIdMapping& GetIdMapping() const;
    const TSimpleMappingPartialIdMapping& GetPartialIdMapping() const;
    const NTableClient::TTableSchemaPtr& GetPrimaryTableSchema() const;

private:
    const NTableClient::TTableSchemaPtr Schema_;
    const NTableClient::TNameTablePtr NameTable_;
    const TSimpleMappingIdMapping IdMapping_;
    const TSimpleMappingPartialIdMapping PartialIdMapping_;
    const NTableClient::TTableSchemaPtr PrimaryTableSchema_;

private:
    DECLARE_LEAKY_SINGLETON_FRIEND()

    TSimpleMappingDescriptor();
};

struct TSimpleMappingKey
{
    using TRecordDescriptor = TSimpleMappingDescriptor;

    std::string KeyA{};
    std::string KeyB{};
    NYson::TYsonString KeyC{};

    bool operator==(const TSimpleMappingKey& rhs) const = default;

    NYT::NTableClient::TLegacyKey ToKey(const NYT::NTableClient::TRowBufferPtr& rowBuffer) const;
    static TSimpleMappingKey FromKey(NYT::NTableClient::TLegacyKey key);
};

struct TSimpleMapping
{
    using TRecordDescriptor = TSimpleMappingDescriptor;

    TSimpleMappingKey Key;
    std::string ValueA{};
    std::string ValueB{};
    NYson::TYsonString ValueC{};

    bool operator==(const TSimpleMapping& rhs) const = default;

    NYT::NTableClient::TUnversionedRow ToUnversionedRow(
        const NYT::NTableClient::TRowBufferPtr& rowBuffer,
        const TSimpleMappingPartialIdMapping& idMapping,
        NYT::NTableClient::EValueFlags flags = NYT::NTableClient::EValueFlags::None) const;
    static TSimpleMapping FromUnversionedRow(
        NYT::NTableClient::TUnversionedRow row,
        const TSimpleMappingPartialIdMapping& idMapping);
};

struct TSimpleMappingPartial
{
    using TRecordDescriptor = TSimpleMappingDescriptor;

    TSimpleMappingKey Key;
    std::optional<std::string> ValueA{};
    std::optional<std::string> ValueB{};
    std::optional<NYson::TYsonString> ValueC{};

    bool operator==(const TSimpleMappingPartial& rhs) const = default;

    NYT::NTableClient::TUnversionedRow ToUnversionedRow(
        const NYT::NTableClient::TRowBufferPtr& rowBuffer,
        const TSimpleMappingPartialIdMapping& idMapping,
        NYT::NTableClient::EValueFlags flags = NYT::NTableClient::EValueFlags::None) const;
    static TSimpleMappingPartial FromUnversionedRow(
        NYT::NTableClient::TUnversionedRow row,
        const TSimpleMappingPartialIdMapping& idMapping);
};

////////////////////////////////////////////////////////////////////////////////

} // namespace NYT::NTableClient::NTest::NRecords
